## README



## Brief

As defined in the Fundamental Project Specification, the objective of this project was to:
"Create a CRUD application with utilisation of supporting tools,
methodologies and technologies that encapsulate all core modules covered during training."

To break this down further:

..* CRUD stands for Create, Read, Update, Delete. These are to be the primary interactions between my application and my database.

..* The main supporting tools, methdodologies and technologies learned through my training are: Agile techniques, MySQL databases, Python programming, Flask applicaitons and Jenkins deployment.

Further requirements included:

..* A Trello Board featuring user stories, use cases and tasks to do.

..* A relational database conatining at least two tables with a relationship between them.

..* Test suites for the application, with automated tests for validation, and automatically generated reports.

..* Code integrated within a feature-branch version control system, built through a CI server and deployed to a cloud-based VM.

### My Proposal

My website would be built around a database of historical battles and generals. Users would have the ability to perform the CRUD functions on tables of battles and generals, as well as assign battles to generals.

## Trello Board

### Initial Board
![Initial Board](https://github.com/Finn969/Project-SFIA-1/blob/master/Trello%20Board.png)

My Trello board was primarily based on the Agile concept of a kanban board, but simplified to reflect its usage by a single person. The far left "user stories" column contains the broad features that a user of my application would want to implement. The "backlog" is a formal list of broad tasks which are essential to making the user stories possible. From these broader tasks, more specific tasks that could be completed in a manageable time were identified and listed in the "to do" column. Each task would be added to the "doing" column while in progress, and finally moved to "done" when complete.

The 'milestones' document posted in the #important slack channel served as a good source of completable objectives.

The ordinary items in the User stories list are what is essential to the minimum viable product, whereas the items labelled "STRETCH" were considered as possible additions.

### Final Board
![Final Board](https://github.com/Finn969/Project-SFIA-1/blob/master/Trello%20End.png)

## Risk Assessment
---

|Risk|Description|Hazard|Likelihood|Impact|Solution|
|---|---|---|---|---|---|
|Running out of time.|Project left unfinished due to poor time management.|Project may be incomplete and marks lost as a result.|2|5|Manage time and plan objectives through use of Kanban board, ensure work is completed early.|
Data breach on workstation.|Work station is compromised.|Severe progress loss.|1|5|Change passwords on workstation, keep instances off when not in use.|
|Depleted GCP credit.|An instance is left running, or an account breach enables the resources on the account to be drained.|Databases unable to be access|1|5|Continue monitoring GCP usage. Copy databases offline as final backup.|
|Database security.| A GCP server is breached.|Data potentially lost or destroyed|2|5|Ensure passwords are secure, backup code where possible.|
|Health problem: Injury|I suffer an injury due to an accident or physical attack.|Potentially become unable to complete the project|1|5|Avoid situations with risk of injury.|
|Health problem: Disease|I catch a serious infection|Potentially become unable to complete the project|2|5|Ensure good hygene and cleanliness (Note: this table was written prior to the COVID-19 Epidemic)|

Likelihood and Impact are rated on a scale from 1 to 5.

## Entity Relationship Diagram

My initial plan was built to be rather simple, conatining two main tables to contain battles and generals, with a minor third table which establishes relationships between them, given that pure many-to-many relationships are difficult to implement.

### Initial ERD
![Initial ERD](https://github.com/Finn969/Project-SFIA-1/blob/master/ERD.png)

I was able to fully complete this structure with some time left over. While my initially planned structure satisfied the MVP, I chose to attempt to satisfy my initally set stretch goals:

### Final ERD
![Final ERD](https://github.com/Finn969/Project-SFIA-1/blob/master/ERDv2.png)

My final structure aimed to show more complex relations: the winner and loser of each battle. This was achieved by inserting additional foreign keys into the battle table, and inserting a new minor table for armies.

## Testing

Using Pytest, I was able to create testing functions in a testing.py file. This file implements both URL and database tests.
URL tests pings each webpage generated by the application, testing that each page is properly generated without without causing a crash.
Database testing runs CRUD functions on each table with placeholder values, testing that the tables can be properly modified, and that the relations between tables do not break.

This testing file is called by Jenkins during each build, and coverage is used to generate a report on how many of the tests are successful.

### Test Report
![Test Report](https://github.com/Finn969/Project-SFIA-1/blob/master/ERD.png)

## Deployment

### Pipeline Diagram
![Pipeline](https://github.com/Finn969/Project-SFIA-1/blob/master/Pipeline.png)

New code would be written on a local machine accessing a GCP compute engine via SSH in VScode. This development environment would then be regularly pushed to a github repository, used to version control the software. A webhook was established between my github repository and my Jenkins server, which would automatically detect any new commits to the repo, and undergo the build/deployment process of the app as a service. The app would be able to directly interact with the MySQL server. 

## Demonstration of Application

### Homepage - List of Generals
![1](https://github.com/Finn969/Project-SFIA-1/blob/master/Screenshots/Homepage%201.png)

![2](https://github.com/Finn969/Project-SFIA-1/blob/master/Screenshots/Homepage%202.png)

### List of Battles
![1](https://github.com/Finn969/Project-SFIA-1/blob/master/Screenshots/Battlespage%201.png)

![2](https://github.com/Finn969/Project-SFIA-1/blob/master/Screenshots/Battlespage%202.png)

![3](https://github.com/Finn969/Project-SFIA-1/blob/master/Screenshots/Battlespage%203.png)

![4](https://github.com/Finn969/Project-SFIA-1/blob/master/Screenshots/Battlespage%204.png)

### Table of Battle details

![1](https://github.com/Finn969/Project-SFIA-1/blob/master/Screenshots/Battletable.png)

### Update pages

![1](https://github.com/Finn969/Project-SFIA-1/blob/master/Screenshots/updateb.png)

![2](https://github.com/Finn969/Project-SFIA-1/blob/master/Screenshots/updateg.png)

### Assignments page

![1](https://github.com/Finn969/Project-SFIA-1/blob/master/Screenshots/assign.png)

## Retrospective

While I am pleased with the outcome of the project, and satisfied with the skills I have learned, there are some areas I feel should be improved for my next project:

..* While I did occasionally create additional branches for my git repo, I underutilised the branch model, and usually directly committed to the master branch.

..* I did not update the Trello Board particularly frequently.

..* My second structure for my database is, on reflection, overly complicated, and would function well without the armiestable.

In summary, I am content with my progress here, but wise not to repeat my mistakes.

## Authors

Finn Macrae